# 查询页与核心组件代码规范分析计划

本计划旨在对 `src/pages/user/search` 及其相关核心组件进行深度分析，梳理现有代码结构与规范，并产出一份通用的文件组织与编码规范文档。

## 1. 全局依赖扫描与结构分析
*   **目标**: 宏观掌握查询页及核心组件的文件组织架构。
*   **执行步骤**:
    1.  遍历 `src/pages/user/search` 目录，理解页面级结构。
    2.  遍历 `src/components/QueryCard`、`src/components/CitySelector`、`src/components/FieldRenderers`，理解组件级结构。
    3.  识别项目使用的核心技术栈与构建工具特性（Taro, React, Less 等）。

## 2. 深度链路追踪 (关键组件)
*   **目标**: 厘清组件间的引用关系与数据流向。
*   **执行步骤**:
    1.  **QueryCard**: 分析其作为容器组件如何组合子组件，以及与页面及其它组件的交互。
    2.  **CitySelector**: 分析其复杂的内部结构（Tab, List, Sidebar）及数据流。
    3.  **FieldRenderers**: 分析其作为基础UI组件的复用性与接口设计。
    4.  追踪所有 `import` 路径，归类依赖类型（内部组件、公共组件、工具库、静态资源）。

## 3. 多维度规则提取 (5大核心维度)
基于上述分析，从以下五个维度总结规律与问题：

### A. 组件划分与引用规则
*   目录结构风格（扁平 vs 嵌套）。
*   入口文件命名 (`index.tsx` vs `Component.tsx`)。
*   样式文件管理 (`.module.less` vs全局样式，样式文件位置）。
*   组件复用策略。

### B. 状态管理设计规则
*   组件内部状态 (`useState`, `useReducer`) 的使用。
*   跨组件通信 (Props drilling, Context, Event Bus)。
*   全局状态的使用情况（如有）。
*   业务逻辑与UI分离程度。

### C. 工具函数组织规则
*   工具函数的存放位置（组件内 `utils` vs 全局 `src/utils`）。
*   复用性与纯度分析。

### D. 常量配置管理规则
*   常量的定义位置（组件内 vs 独立 `constants` 文件）。
*   命名规范（UPPER_CASE vs camelCase）。
*   多语言或配置项的处理。

### E. 跨文件依赖与导入导出规则
*   路径引用规范（相对路径 `../../` vs 别名 `@/`）。
*   导出规范（`export default` vs `export const`）。
*   索引文件 (`index.ts`) 的使用情况。

## 4. 规范文档编写
*   **目标**: 产出结构化中文文档。
*   **文档结构**:
    1.  **现有约定 (已落地)**: 总结当前代码库中保持一致且合理的实践。
    2.  **推荐规范 (待统一)**: 针对不一致或缺失的部分，提出统一标准。
    3.  **整改建议**: 具体指出哪些文件或模式需要重构以符合新规范。

## 5. 最终输出
*   在对话中直接输出《通用文件组织与编码规范文档》。
